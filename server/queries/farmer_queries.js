const pool = require('../db/config');

const db_schema = require('../db/schema');

// const farmers_list = "SELECT DISTINCT ON (RefPlantId) p.PlantId AS plantId, f.IdCard AS idCard, f.AbbrPrefix As prefix, f.FirstName AS firstName, f.LastName AS lastName, d.ThaiName AS thaiName, p.BranchCode AS branchCode, b.BranchName AS branchName, p.BreedTypeId AS breedTypeId, t.BreedTypeName AS breedTypeName, p.PlantYear AS plantYear, p.PlantNo AS plantNo, p.RefPlantId As refPlantId, p.reason AS reason, LEFT(p.PlantStatus,1) AS plantStatus, p.status AS status, p.remark AS remark FROM dtrv15dev.Plant AS p LEFT JOIN dtrv15dev.BreedType AS t ON p.BreedTypeId = t.BreedTypeId LEFT JOIN dtrv15dev.Farmer AS f ON p.IdCard = f.IdCard AND f.effectiveDate = p.effectiveDate LEFT JOIN dtrv15dev.Branch AS b ON p.BranchCode = b.BranchCode LEFT JOIN dtrv15dev.Region AS r ON f.RegionNo = r.RegionNo LEFT JOIN dtrv15dev.Province AS prov ON f.ProvinceNo = prov.ProvinceNo LEFT JOIN dtrv15dev.District AS d ON f.DistrictNo = d.DistrictNo LEFT JOIN dtrv15dev.SubDistrict AS sub ON f.SubDistrictNo = sub.SubDistrictNo LEFT JOIN dtrv15dev.FarmerGroup AS fg ON p.FarmerGroupId2 = fg.FarmerGroupId LEFT JOIN dtrv15dev.FarmerGroupAddress AS fga ON fg.FarmerGroupId = fga.FarmerGroupId WHERE  p.Flag <> 'D' AND p.plantid = (select max(pl.plantid) from dtrv15dev.Plant pl WHERE pl.RefPlantId= p.RefPlantId) AND p.farmergroupid2 IN (SELECT ufg.FarmerGroupId FROM dtrv15dev.userFarmerGroup As ufg WHERE ufg.username='surya') ORDER BY RefPlantId;"
// const farmers_list = `SELECT DISTINCT ON (RefPlantId) p.PlantId AS plantId, f.IdCard AS idCard, f.AbbrPrefix As prefix, f.FirstName AS firstName, f.LastName AS lastName, d.ThaiName AS thaiName, p.BranchCode AS branchCode, b.BranchName AS branchName, p.BreedTypeId AS breedTypeId, t.BreedTypeName AS breedTypeName, p.PlantYear AS plantYear, p.PlantNo AS plantNo, p.RefPlantId As refPlantId, p.reason AS reason, LEFT(p.PlantStatus,1) AS plantStatus, p.status AS status, p.remark AS remark FROM ${db_schema}.Plant AS p LEFT JOIN ${db_schema}.BreedType AS t ON p.BreedTypeId = t.BreedTypeId LEFT JOIN ${db_schema}.Farmer AS f ON p.IdCard = f.IdCard AND f.effectiveDate = p.effectiveDate LEFT JOIN ${db_schema}.Branch AS b ON p.BranchCode = b.BranchCode LEFT JOIN ${db_schema}.Region AS r ON f.RegionNo = r.RegionNo LEFT JOIN ${db_schema}.Province AS prov ON f.ProvinceNo = prov.ProvinceNo LEFT JOIN ${db_schema}.District AS d ON f.DistrictNo = d.DistrictNo LEFT JOIN ${db_schema}.SubDistrict AS sub ON f.SubDistrictNo = sub.SubDistrictNo LEFT JOIN ${db_schema}.FarmerGroup AS fg ON p.FarmerGroupId2 = fg.FarmerGroupId LEFT JOIN ${db_schema}.FarmerGroupAddress AS fga ON fg.FarmerGroupId = fga.FarmerGroupId WHERE  p.Flag <> 'D' AND p.plantid = (select max(pl.plantid) from ${db_schema}.Plant pl WHERE pl.RefPlantId= p.RefPlantId) AND p.farmergroupid2 IN (SELECT ufg.FarmerGroupId FROM ${db_schema}.userFarmerGroup As ufg WHERE ufg.username='surya') ORDER BY RefPlantId;`
const farmers_list = "select * from dtrv15dev.login";

module.exports = {farmers_list}